<!DOCTYPE html>
<html lang="de">
  <head>
		<%- head_template %>
		<link href="./css/style.css" rel="stylesheet">
    <title>Beat the Berg! - Instructions</title>
  </head>
  <body>
	<article>
		<a href="./"><img class="logo" src="./logos/logo1.png"></a>
		<h1>Willkommen bei Beat the Berg!</h1>
		<h2>Beat the Berg ist die beste interaktive Augmented-Reality Schnitzeljagd, die ihr je gesehen habt!</h2>
		<h3>So funktioniert es: </h3>
			<ul><li>Auf dem ganzen Campus sind Marker verteilt, die es in der richtigen Reihenfolge zu finden gilt.</li>
			<li>Wenn du den Marker anvisiert, erscheint der nächste Hinweis.</li>
			<li>Damit die Schnitzeljagd funktionieren kann, musst du der Webseite den Zugriff auf deine Kamera erlauben.</li>
			<li>Auch benötigst du das ganze Spiel über eine Internetverbindung.</li>
			<li>Je nach Verbindungs&shy;geschwindigkeit dauert das erste Laden etwas, hab also ein paar Sekunden Geduld.</li>
			<li>Der erste Marker wartet schon auf dich! <wbr>Trage deinen Username ein und leg los!</li></ul>
		<% if (user) { %>
			<div>
				<div class="form-group">
					<label for="InputUsername">Dein Username:</label>
					<input name="user" type="text" class="form-control" id="InputUsername" aria-describedby="UsernameHelp" placeholder="maxmustermann1">
				</div>
				<button onclick="register()" name="register" class="btn btn-primary register">Registrieren</button>
				<button onclick="login()" name="login" class="btn btn-primary login">Einloggen</button>
			</div>
		<% } else { %>
			<h3>Dein Fortschritt</h3>
			<div class="progress">
				<div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">25%</div>
			</div>
		<%  } %>
		<h3>Bestenliste</h3>
		<table summary="Leaderboard" title="Leaderboard" class="table table-striped leaderboard">
			<thead class="thead-dark">
				<th scope="col">Platz</th>
				<th scope="col">Username</th>
				<th scope="col">Zeit</th>
			</thead>
			<tbody>
				<tr>
				  <td scope="row">1</td>
				  <td>Mark</td>
				  <td>200</td>
				</tr>
				<tr>
				  <td scope="row">2</td>
				  <td>Jacob</td>
				  <td>500</td>
				</tr>
				<tr>
				  <td scope="row">3</td>
				  <td>Larry</td>
				  <td>900</td>
				</tr>
				<tr class="own-score">
				  <td scope="row">200</td>
				  <td>Quentin</td>
				  <td>9000</td>
				</tr>
			</tbody>
		</table>
	</article>
	<script>
		async function login() {
			let inputValue = document.querySelector('#InputUsername').value;
			let res = await axios.post('/api/user/login', {
				user: inputValue
			});
			if (res.data.status === 500) {
				alert('Bitte registriere dich zuerst!');
			} else {
				window.location.reload(true);
			}
		}

		async function register() {
			let inputValue = document.querySelector('#InputUsername').value;
			let res = await axios.post('/api/user/register', {
				user: inputValue
			});
			window.location.reload(true);
		}
	</script>
  </body>
</html>
